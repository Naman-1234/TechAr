<%- include('./Partials/chore.ejs') -%>  
<link href="css/models.css" rel="stylesheet">
<style>
  .page__holder {
    width: 100%;
    /* //currently putting it 90vh */
    height: 90vh;
    display: flex;
    flex-direction: row;
    /* align-items: center; */
    /* justify-content: center; */
}
.model__container {
    width: 78%;
    display: flex;
    flex-direction: column;
    /* justify-content: center; */
    align-items: center;
}

.search__input {
    /* display: flex; */
    /* flex-direction: column; */
    width: 50%;
    margin-top: 7vh;
    /* align-items: center; */
}

.search__input input {
    width: 100%;
    height: 7vh;
}

.tag__section {
    border-left: 2px solid black;
    width: 22%;
    height: 100%;
    height: 100vh;
    position: fixed;
    left: 78%;
}

.tag__head {
  margin-top: 15%;
  font-size: 30px;
}
.tag {
  background-color: rgb(107, 107, 230);
  display: inline;
  margin-left: 10px;
  border-radius: 5px;
  line-height: 45px;
  position: relative;
  padding: 10px 10px 10px 10px ;
  color: white;
}
.tag a {
  text-decoration: none;
  color: inherit;
}
  .search__label {
    font-size: 20px;
    font-weight: bold;
  }
.search__input input {
  font-size: 20px;
}
</style>
<div class="page__holder">
    <div class="model__container">
    <div class="search__input">
        <label for="search" class="search__label">Search</label>
        <input type="text" placeholder="enter model name " class="form-group"></input>
    </div>
    <!-- https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR4Zeehq1KG2a0ZVemWuvlxXQi1gbT3Jzi6pg&usqp=CAU -->
    <div class="container mt-5 text-center">
        <!-- <h1 class="text-center"> <%= model.length %> </h1> -->
        <button class="btn btn-primary" onclick="modelsDispatch()">Add all selected models </button>
        <div class="row">
      <% for(var i=0;i<model.length;i++) {%>

                       <div class="col-md-4">
                       <div class="card stylecard mt-3">
      
                        <div class="view overlay">
                          <!-- <a class="btn btn-rounded btn-md btn-primary edit__btn btn-circle btn-sm" >E</a>  -->
                            <img class="card-img-top" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR4Zeehq1KG2a0ZVemWuvlxXQi1gbT3Jzi6pg&usqp=CAU" alt="Card image cap">
                          <a>
                            <div class="mask rgba-white-slight"></div>
                          </a>
                        </div>
                      
                       
                        <div class="card-body">
                      
                          <!-- Title -->
                          <h3 class="card-title text-center text-capitalize"><%= model[i].model__name %></h4>
                          <hr>
                          <!-- Text -->
                          <p class="card-text set-width">Press Button below to add it in your lecture and see the change of education in future</p>
                          <div class="text-center">
                          
                          <div class="row">                  
                              <div class="col-sm">
                              <a class="btn  btn-rounded btn-md btn-primary text-center" id="<%= model[i].model__name %>" onclick="addModels('<%= model[i].model__name %>')">Add to lecture</a>
                              </div>
                              </div class="col-sm">
                              <a class="btn  btn-rounded btn-md btn-primary text-center" href="<%= model[i].model__url %>">view </a>
      
                            </div>
                        </div>
                        
                      </div>
          </div>
          <% } %>
      </div>
      </div>
    </div>
    <div class="tag__section">
        <h1 class="text-center tag__head" > Search by tags</h1>
      <% for(var i=0;i<model.length;i++) {%>
        <div class="tag">
          <% link = "#" + model[i].model__name %>
          <a href="<%= link %>"><%= model[i].model__name %></a> 
        </div>
      <% }%>

    </div>
</div>
<script>
  var arr = [];
  function addModels(model_name) {
    arr.push(model_name)
    console.log(model_name)
    console.log(arr);
    // var model__array = ['hello','hello','hello','hello','hello','hello','hello','hello','hello','hello'];
    // for(let i=0;i<model__array.length;i++){
      var changeText = document.getElementById(model_name);
      changeText.innerHTML = "Added";
    // }
  }

  function modelsDispatch() {
    var xhr = new XMLHttpRequest()
  xhr.open('POST', '/dashboard/generate/add-model', true);
  xhr.setRequestHeader('Content-Type', 'application/json');

  console.log(arr)
     xhr.send(
      JSON.stringify({
        models_array: arr,
        lecture_id: '<%- lecture_id %>'
      })
    );
    // alert("you lecture formed successfully you will be redirected to dashboard shortly ");
    swal({
      title: "Good job!",
      text: "Lecture added successfully",
      icon: "success",
      button: "Thanks",
    });
    setTimeout(function redirect(){
      window.location.href="/dashboard"
    },1000)
  }
</script>
